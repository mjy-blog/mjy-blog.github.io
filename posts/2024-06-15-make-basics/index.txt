3:I[4707,[],""]
5:I[36423,[],""]
6:I[25217,["8310","static/chunks/0e5ce63c-071548683042eae5.js","4642","static/chunks/4642-f64436cc05efdcb6.js","1925","static/chunks/1925-374aca03d3718244.js","3185","static/chunks/app/layout-804c0be9531e3afc.js"],"ThemeProvider"]
7:I[87916,["8310","static/chunks/0e5ce63c-071548683042eae5.js","4642","static/chunks/4642-f64436cc05efdcb6.js","1925","static/chunks/1925-374aca03d3718244.js","3185","static/chunks/app/layout-804c0be9531e3afc.js"],"BlogProvider"]
8:I[60636,["8310","static/chunks/0e5ce63c-071548683042eae5.js","4642","static/chunks/4642-f64436cc05efdcb6.js","1925","static/chunks/1925-374aca03d3718244.js","3185","static/chunks/app/layout-804c0be9531e3afc.js"],"HierarchyProvider"]
9:I[77411,["8310","static/chunks/0e5ce63c-071548683042eae5.js","4642","static/chunks/4642-f64436cc05efdcb6.js","1925","static/chunks/1925-374aca03d3718244.js","3185","static/chunks/app/layout-804c0be9531e3afc.js"],"Header"]
4:["slug","2024-06-15-make-basics","d"]
0:["ojOCz3zuUAaaBIZzydfan",[[["",{"children":["posts",{"children":[["slug","2024-06-15-make-basics","d"],{"children":["__PAGE__?{\"slug\":\"2024-06-15-make-basics\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["posts",{"children":[["slug","2024-06-15-make-basics","d"],{"children":["__PAGE__",{},[["$L1","$L2",null],null],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/ea7c1ae2de6b4fec.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"ko","children":[["$","head",null,{"children":[["$","meta",null,{"content":"width=device-width, initial-scale=1","name":"viewport"}],[["$","link",null,{"rel":"apple-touch-icon","sizes":"180x180","href":"/theme/apple-touch-icon.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"32x32","href":"/theme/favicon-32x32.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"16x16","href":"/theme/favicon-16x16.png"}],["$","link",null,{"rel":"manifest","href":"/theme/site.webmanifest"}],["$","link",null,{"rel":"stylesheet","href":"https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.css","integrity":"sha384-K1E1xaIzoWihlXfiT5fcmLNabsnrl+dqc0errnRwtMX14tKRA9cCYNDGnXiHEZMs","crossOrigin":"anonymous"}]]]}],["$","body",null,{"children":["$","$L6",null,{"children":["$","$L7",null,{"children":["$","$L8",null,{"children":["$","div",null,{"className":"flex flex-col min-h-screen","children":[["$","$L9",null,{}],["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}],["$","footer",null,{"className":"border-t py-6 md:py-0","children":["$","div",null,{"className":"container mx-auto px-4 flex flex-col items-center justify-between gap-4 md:h-24 md:flex-row","children":[["$","p",null,{"className":"text-center text-sm leading-loose text-muted-foreground md:text-left","children":"Copyright ©. All rights reserved."}],["$","nav",null,{"className":"flex items-center space-x-4 text-sm font-medium","children":[["$","a",null,{"href":"https://github.com/mjy-blog/core","children":"Core"}],["$","a",null,{"href":"https://github.com/mjy-blog/theme-example","children":"Theme"}]]}]]}]}]]}]}]}]}]}]]}]],null],null],["$La",null]]]]
a:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Makefile, make 기초 | mjy-blog"}],["$","meta","3",{"property":"og:title","content":"Makefile, make 기초 | mjy-blog"}],["$","meta","4",{"name":"twitter:card","content":"summary"}],["$","meta","5",{"name":"twitter:title","content":"Makefile, make 기초 | mjy-blog"}]]
1:null
b:I[44378,["1919","static/chunks/ebbfb5c1-a73c51b6a41a5ff6.js","4642","static/chunks/4642-f64436cc05efdcb6.js","7543","static/chunks/7543-44cf95f51b263ee3.js","333","static/chunks/app/posts/%5Bslug%5D/page-563305aae20a5902.js"],"PostPage"]
2:["$","$Lb",null,{"hierarchy":{"nodes":[["C",{"type":"category","sub":[["프로젝트",{"type":"category"}],["2024-06-15-make-basics",{"type":"post","title":"Makefile, make 기초"}],["2024-06-16-about-c-name-prefix-in-library",{"type":"post","title":"C 라이브러리에서 이름 접두사에 대해"}],["2024-06-16-c-header-organize-rules",{"type":"post","title":"C 헤더 정리 규칙"}],["2024-06-23-setup-c-development-environment-on-windows",{"type":"post","title":"Windows C 개발환경 설정"}]]}],["CMake",{"type":"category"}],["HTML",{"type":"category"}],["IT 잡지식",{"type":"category"}],["Tools",{"type":"category"}],["TypeScript",{"type":"category"}],["Unity",{"type":"category"}],["vscode",{"type":"category"}],["기타",{"type":"category"}],["웹",{"type":"category"}],["튜토리얼",{"type":"category"}],["프로젝트",{"type":"category"}]],"path":["C"]},"MDXContent":[["$","p",null,{"children":"C에 주로 사용되지만 C에 국한되지만은 않는, 빌드 시스템 make에 대해 알아보자"}],"\n",["$","h2",null,{"id":"TOC","children":"목차"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#tl-dr","children":"세 줄 요약"}]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#make","children":"make"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#dependency-management","children":"의존성 관리"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#incremental-build","children":"증분 빌드"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#version-of-make","children":"make의 버전"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":[["$","a",null,{"href":"#makefile","children":"Makefile"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"#rules","children":"규칙"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#variables","children":"변수"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#auto-variables-and-patterns","children":"자동 변수, 패턴"}]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#phony-rules","children":".PHONY 규칙"}]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["$","a",null,{"href":"#conclusion","children":"마무리"}]}],"\n"]}],"\n",["$","h2",null,{"id":"tl-dr","children":"세 줄 요약"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"make는 의존성 관리와 증분 빌드 기능을 지원하는 빌드 시스템이다"}],"\n",["$","li",null,{"children":"의존성 관리 = 빌드 순서 관리, 증분 빌드 = 바뀐 것만 빌드"}],"\n",["$","li",null,{"children":"make는 원시적인 빌드 시스템이다. 웬만하면 그냥 CMake같은 거 쓰자"}],"\n"]}],"\n",["$","p",null,{"children":"근데 문법은 세 줄 요약이 안 되네..."}],"\n",["$","h2",null,{"id":"make","children":"make"}],"\n",["$","p",null,{"children":"make는 의존성 관리와 증분 빌드 기능을 갖춘 빌드 시스템이다."}],"\n",["$","p",null,{"children":"일단 이름 그대로 무언가를 만드는 데 사용된다."}],"\n",["$","h3",null,{"id":"dependency-management","children":"의존성 관리"}],"\n",["$","p",null,{"children":"빌드 과정에서 의존성에 따른 빌드 순서는 무척 중요하다."}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"a.c"}],"로 ",["$","code",null,{"children":"a.o"}],"를 만들고, ",["$","code",null,{"children":"a.o"}],"로 ",["$","code",null,{"children":"a.out"}],"을 만드는 상황을 가정하면,"]}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"a.out"}],"을 빌드하기 위해서는 ",["$","code",null,{"children":"a.o"}],"가 필요하고, ",["$","code",null,{"children":"a.o"}],"를 빌드하기 위해서는 ",["$","code",null,{"children":"a.c"}],"가 필요하다."]}],"\n",["$","p",null,{"children":["여기서 ",["$","code",null,{"children":"a.out"}],"은 ",["$","code",null,{"children":"a.o"}],"에, ",["$","code",null,{"children":"a.o"}],"는 ",["$","code",null,{"children":"a.c"}],"에 의존성이 있다고 한다."]}],"\n",["$","p",null,{"children":"이 의존 관계를 의존성 그래프로 나타내면 이렇게 된다."}],"\n",["$","pre",null,{"className":"mermaid","children":"flowchart TD\n    a.c --> a.o\n    a.o --> a.out\n"}],"\n",["$","p",null,{"children":["최종적으로 만들고 싶은 파일은 ",["$","code",null,{"children":"a.out"}],"이고, 이를 만들기 위해서는..."]}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":[["$","code",null,{"children":"a.c"}],"를 컴파일해서 ",["$","code",null,{"children":"a.o"}],"를 만들고"]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"a.o"}],"를 링킹해서 ",["$","code",null,{"children":"a.out"}],"을 만들면 된다."]}],"\n"]}],"\n",["$","p",null,{"children":"작업 순서는 의존성 그래프를 위상정렬해서 구할 수 있다."}],"\n",["$","p",null,{"children":"이 경우에는 의존성 그래프가 무척 간단했지만, 의존성 그래프는 그다지 간단하지 않을 수 있다."}],"\n",["$","pre",null,{"className":"mermaid","children":"flowchart TD\n    test_data.txt --> test_data.h\n    test_data.h.m4 --> test_data.h\n    tester.c --> tester.o\n    test_data.h --> tester.o\n    testee.c --> testee.o\n    lib.h --> testee.o\n    lib.h --> lib.o\n    lib.c --> lib.o\n    testee.o --> testee.exe\n    lib.o --> lib.a\n    lib.a --> testee.exe\n    tester.o --> tester.exe\n    tester.exe --> test.txt\n    testee.exe --> test.txt\n"}],"\n",["$","p",null,{"children":"하지만 위상정렬을 통해 간단히 작업 순서를 찾을 수 있다. (순환이 있다면 작업을 완료할 수 없다.)"}],"\n",["$","p",null,{"children":"make는 규칙을 정의하면 그 규칙에서 적절한 작업 순서를 찾아서, 그 순서대로 작업을 수행한다."}],"\n",["$","p",null,{"children":"이것을 의존성 관리라고 한다."}],"\n",["$","h3",null,{"id":"incremental-build","children":"증분 빌드"}],"\n",["$","p",null,{"children":"위의 의존성 그래프를 다시 보자."}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"testee.c"}],"를 바꾸고 다시 빌드한다면, 뭘 다시 만들어야 할까?"]}],"\n",["$","p",null,{"children":["모든 것을 할 필요 없이, ",["$","code",null,{"children":"testee.c"}],"에 의존성이 있는 항목만 다시 만들면 된다.",["$","br",null,{}],"\n",["$","code",null,{"children":"testee.c"}]," -> ",["$","code",null,{"children":"testee.o"}]," -> ",["$","code",null,{"children":"testee.exe"}]," -> ",["$","code",null,{"children":"test.txt"}]," 순서로."]}],"\n",["$","p",null,{"children":"이렇게 필요한 것만 추려서 다시 만드는 과정은 사람이 하기에는 머리가 아픈 일이다."}],"\n",["$","p",null,{"children":"make는 규칙을 잘 정의하면 무언가가 변경되었을 때, 변경이 필요한 것들만 다시 만들어준다."}],"\n",["$","p",null,{"children":"이것을 증분 빌드라고 한다."}],"\n",["$","h3",null,{"id":"version-of-make","children":"make의 버전"}],"\n",["$","p",null,{"children":"make의 규격은 POSIX에서 정의하고 있다."}],"\n",["$","p",null,{"children":"하지만 대부분 make를 사용한다고 하면 기능이 풍부한 GNU Make를 사용한다."}],"\n",["$","p",null,{"children":"이 글에서는 GNU Make를 사용하는 것으로 가정하고 GNU Make를 기준으로 설명한다."}],"\n",["$","p",null,{"children":"POSIX에서 정의한 make와는 조금 다른 부분이 있다."}],"\n",["$","h2",null,{"id":"makefile","children":"Makefile"}],"\n",["$","p",null,{"children":"앞선 make 소개에서 규칙을 정의하면 변경이 필요한 것만 만들어 준다고 했었는네,"}],"\n",["$","p",null,{"children":"그 규칙을 Makefile이라는 파일에 정의하게 된다."}],"\n",["$","p",null,{"children":"Makefile만의 문법이 따로 있어서 그 문법에 맞게 규칙을 정의하게 되는데,"}],"\n",["$","p",null,{"children":"그 규칙은 의존 관계와 그 파일을 만드는 방법으로 나뉜다."}],"\n",["$","h3",null,{"id":"rules","children":"규칙"}],"\n",["$","p",null,{"children":"아까의 간단한 의존성 그래프를 다시 보자."}],"\n",["$","pre",null,{"className":"mermaid","children":"flowchart TD\n    a.c --> a.o\n    a.o --> a.out\n"}],"\n",["$","p",null,{"children":["여기서 ",["$","code",null,{"children":"a.c"}],"는 사람이 직접 만들 파일이다. ",["$","code",null,{"children":"a.c"}],"를 만드는 규칙은 필요하지 않디."]}],"\n",["$","p",null,{"children":"이 경우에는 아래의 두 가지 규칙이 필요하다."}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":[["$","code",null,{"children":"a.c"}],"를 컴파일해서 ",["$","code",null,{"children":"a.o"}],"를 만드는 규칙"]}],"\n"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["의존성: ",["$","code",null,{"children":"a.c"}]]}],"\n",["$","li",null,{"children":["만드는 방법: ",["$","code",null,{"children":"cc -c a.c"}]]}],"\n"]}],"\n",["$","ol",null,{"start":"2","children":["\n",["$","li",null,{"children":[["$","code",null,{"children":"a.o"}],"를 링킹해서 ",["$","code",null,{"children":"a.out"}],"을 만드는 규칙"]}],"\n"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["의존성: ",["$","code",null,{"children":"a.o"}]]}],"\n",["$","li",null,{"children":["만드는 방법: ",["$","code",null,{"children":"cc a.o -o a.out"}]]}],"\n"]}],"\n",["$","p",null,{"children":"이를 Makefile 문법으로 나타내면 이렇게 된다."}],"\n",["$","pre",null,{"className":"language-makefile","children":["$","code",null,{"className":"language-makefile code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token target symbol","children":"a.o"}],["$","span",null,{"className":"token punctuation","children":":"}]," a.c\n"]}],["$","span",null,{"className":"code-line","children":"\tcc -c a.c\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token target symbol","children":"a.out"}],["$","span",null,{"className":"token punctuation","children":":"}]," a.o\n"]}],["$","span",null,{"className":"code-line","children":"\tcc a.o -o a.out\n"}]]}]}],"\n",["$","p",null,{"children":["우선 ",["$","code",null,{"children":"(만들 파일1) (만들 파일2) ...: (의존성1) (의존성2) ..."}],"처럼 의존 관계를 정의하고,"]}],"\n",["$","p",null,{"children":["다음 줄부터 만드는 방법을 한 줄씩 ",["$","strong",null,{"children":"탭으로 들여쓰기"}]," 해서 차례대로 쓰면 된다."]}],"\n",["$","h3",null,{"id":"variables","children":"변수"}],"\n",["$","p",null,{"children":"같은 이름을 여러번 쓰는 것은 좋지 않다."}],"\n",["$","p",null,{"children":"예를 들어 특정 파일의 이름을 여러 번 쓴다면, 파일 이름이 바뀔 때마다 그 파일 이름을 쓴 모든 곳을 수정해야 하고, 그 중 한 곳이라도 수정하는 것을 잊으면 제대로 동작하지 않을 수 있다."}],"\n",["$","p",null,{"children":"그럴 때에는 변수를 쓸 수 있다."}],"\n",["$","p",null,{"children":["변수는 ",["$","code",null,{"children":"변수명 = 값"}],"으로 정의하고, ",["$","code",null,{"children":"$$(변수명)"}],"으로 사용할 수 있다."]}],"\n",["$","pre",null,{"className":"language-makefile","children":["$","code",null,{"className":"language-makefile code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# 변수 정의"}],"\n"]}],["$","span",null,{"className":"code-line","children":["CC ",["$","span",null,{"className":"token operator","children":"="}]," cc\n"]}],["$","span",null,{"className":"code-line","children":["A_C ",["$","span",null,{"className":"token operator","children":"="}]," a.c\n"]}],["$","span",null,{"className":"code-line","children":["A_O ",["$","span",null,{"className":"token operator","children":"="}]," a.o\n"]}],["$","span",null,{"className":"code-line","children":["TARGET ",["$","span",null,{"className":"token operator","children":"="}]," a.out\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# 변수 사용"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token target symbol","children":[["$","span",null,{"className":"token variable","children":"$$"}],"(A_O)"]}],["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token variable","children":"$$"}],["$","span",null,{"className":"token punctuation","children":"("}],"A_C",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["\t",["$","span",null,{"className":"token variable","children":"$$"}],["$","span",null,{"className":"token punctuation","children":"("}],"CC",["$","span",null,{"className":"token punctuation","children":")"}]," -c ",["$","span",null,{"className":"token variable","children":"$$"}],["$","span",null,{"className":"token punctuation","children":"("}],"A_C",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token target symbol","children":[["$","span",null,{"className":"token variable","children":"$$"}],"(TARGET)"]}],["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token variable","children":"$$"}],["$","span",null,{"className":"token punctuation","children":"("}],"A_O",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["\t",["$","span",null,{"className":"token variable","children":"$$"}],["$","span",null,{"className":"token punctuation","children":"("}],"CC",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token variable","children":"$$"}],["$","span",null,{"className":"token punctuation","children":"("}],"A_O",["$","span",null,{"className":"token punctuation","children":")"}]," -o ",["$","span",null,{"className":"token variable","children":"$$"}],["$","span",null,{"className":"token punctuation","children":"("}],"TARGET",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":"이렇게 변수를 정의해두면 파일명이나 컴파일러가 바뀌어도 그 파일명이나 컴파일러가 쓰인 모든 곳을 바꿀 필요 없이 변수를 정의한 곳만 바꾸면 된다."}],"\n",["$","h3",null,{"id":"auto-variables-and-patterns","children":"자동 변수, 패턴"}],"\n",["$","p",null,{"children":"위처럼 모든 파일마다 규칙을 만들어야 한다면 Makefile을 쓰더라도 Makefile이 매우 길어질 것이다."}],"\n",["$","p",null,{"children":["다행히도 ",["$","em",null,{"children":"(gnu make에는)"}]," 규칙에 패턴을 지정할 수 있다."]}],"\n",["$","p",null,{"children":"하지만 패턴에 대해 알아보기 전에 자동 변수를 먼저 간단히 알아보자."}],"\n",["$","p",null,{"children":"자동 변수는 규칙 안에서 사용할 수 있는, 그때그때 자동으로 만들어지는 변수이다."}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"$$@"}],"는 만들려는 파일 이름, ",["$","code",null,{"children":"$$<"}],"는 의존성 중 첫번째, ",["$","code",null,{"children":"$$^"}],"는 모든 의존성 등… 이 외에도 여러가지가 있다."]}],"\n",["$","pre",null,{"className":"language-makefile","children":["$","code",null,{"className":"language-makefile code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token target symbol","children":"a.o"}],["$","span",null,{"className":"token punctuation","children":":"}]," a.c\n"]}],["$","span",null,{"className":"code-line","children":["\tcc -c ",["$","span",null,{"className":"token variable","children":"$$<"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token target symbol","children":"a.out"}],["$","span",null,{"className":"token punctuation","children":":"}]," a.o\n"]}],["$","span",null,{"className":"code-line","children":["\tcc ",["$","span",null,{"className":"token variable","children":"$$^"}]," -o ",["$","span",null,{"className":"token variable","children":"$$@"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":"이런 자동 변수와 패턴을 결합하면 여러 파일에 대한 규칙을, 규칙 하나로 커버할 수 있다."}],"\n",["$","pre",null,{"className":"language-makefile","children":["$","code",null,{"className":"language-makefile code-highlight","children":[["$","span",null,{"className":"code-line","children":["EXECUTABLE_TARGETS ",["$","span",null,{"className":"token operator","children":"="}]," a.out\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token target symbol","children":"%.o"}],["$","span",null,{"className":"token punctuation","children":":"}]," %.c\n"]}],["$","span",null,{"className":"code-line","children":["\tcc -c ",["$","span",null,{"className":"token variable","children":"$$<"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token target symbol","children":[["$","span",null,{"className":"token variable","children":"$$"}],"(EXECUTABLE_TARGETS)"]}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["\tcc ",["$","span",null,{"className":"token variable","children":"$$^"}]," -o ",["$","span",null,{"className":"token variable","children":"$$@"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token target symbol","children":"a.out"}],["$","span",null,{"className":"token punctuation","children":":"}]," a.o\n"]}]]}]}],"\n",["$","p",null,{"children":["규칙에 ",["$","code",null,{"children":"%"}],"가 있으면, 이 ",["$","code",null,{"children":"%"}],"에는 무엇이든 들어갈 수 있고, 만들려는 파일의 ",["$","code",null,{"children":"%"}],"에 들어간 부분이 의존성의 ",["$","code",null,{"children":"%"}],"에도 들어가게 된다."]}],"\n",["$","h3",null,{"id":"phony-rules","children":".PHONY 규칙"}],"\n",["$","p",null,{"children":"무언가를 만들려는 건 아니지만 자주 쓰는 명령어를 make에 alias처럼 등록해서 쓰고 싶을 수 있다."}],"\n",["$","pre",null,{"className":"language-makefile","children":["$","code",null,{"className":"language-makefile code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token target symbol","children":"clean"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\trm -f *.o\n"}]]}]}],"\n",["$","p",null,{"children":["실제로 이런 식으로 등록해서 쓸 수 있지만, 이렇게 쓰는 경우에는 ",["$","code",null,{"children":"clean"}],"이라는 파일이 있으면 ",["$","code",null,{"children":"make clean"}],"이 아무것도 실행하지 않을 것이다."]}],"\n",["$","p",null,{"children":["그런 문제를 해결하기 위해 ",["$","code",null,{"children":"clean"}],"을 가짜를 의미하는 ",["$","code",null,{"children":".PHONY"}]," 타겟으로 지정할 수 있다."]}],"\n",["$","pre",null,{"className":"language-makefile","children":["$","code",null,{"className":"language-makefile code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token builtin-target builtin","children":".PHONY"}],["$","span",null,{"className":"token punctuation","children":":"}]," clean\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token target symbol","children":"clean"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\trm -f *.o\n"}]]}]}],"\n",["$","p",null,{"children":["이렇게 ",["$","code",null,{"children":"clean"}],"을 ",["$","code",null,{"children":".PHONY"}]," 타겟으로 지정하면 ",["$","code",null,{"children":"clean"}],"이라는 파일이 있어도 ",["$","code",null,{"children":"make clean"}],"이 의도대로 동작한다."]}],"\n",["$","h2",null,{"id":"conclusion","children":"마무리"}],"\n",["$","p",null,{"children":"make는 의존성 관리와 증분 빌드 기능을 갖춘, 무언가를 만드는 데 쓸 수 있는 빌드 시스템이다."}],"\n",["$","p",null,{"children":"Makefile에 무언가를 만드는 방법을 정의할 수 있다."}],"\n",["$","p",null,{"children":"이것만 알면 Makefile로 무엇이든 할 수 있...지만, make는 매우 원시적이다."}],"\n",["$","p",null,{"children":"C나 C++을 위한 거라면, 그냥 CMake 쓰자."}]],"attributes":{"title":"Makefile, make 기초","description":"Makefile, make 사용법","preview":"","tags":["Makefile","make","CMake","빌드시스템"],"categories":["C"],"type":"default","excerpt":"make는 의존성 관리와 증분 빌드 기능을 지원하는 빌드 시스템이다. 빌드 순서 관리, 바뀐 것만 빌드","createTime":"2024-06-17T08:20:57+09:00","updateTime":"2024-10-06 00:43:06 +0900"},"slug":"2024-06-15-make-basics","tocItems":[{"level":2,"title":"목차","id":"TOC"},{"level":2,"title":"세 줄 요약","id":"tl-dr"},{"level":2,"title":"make","id":"make"},{"level":3,"title":"의존성 관리","id":"dependency-management"},{"level":3,"title":"증분 빌드","id":"incremental-build"},{"level":3,"title":"make의 버전","id":"version-of-make"},{"level":2,"title":"Makefile","id":"makefile"},{"level":3,"title":"규칙","id":"rules"},{"level":3,"title":"변수","id":"variables"},{"level":3,"title":"자동 변수, 패턴","id":"auto-variables-and-patterns"},{"level":3,"title":".PHONY 규칙","id":"phony-rules"},{"level":2,"title":"마무리","id":"conclusion"}]}]
